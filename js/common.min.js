window.onload = function () {

    var
        body = $("body"),
        resident = $(".js-animation-resident"),
        door = $(".door_wrapperFull"),
        doorLight = $(".door_light"),
        doorInner = $(".door"),
        hidden = "hidden",
        firstAnimationElements = $(".door_left .door, .door_left .door_light"),
        secondAnimationElements = $(".door_right .door, .door_right .door_light"),
        active = "active";


    function changeRegisterMethod(btn, fild) {
        btn.on("click", function () {
            $(".bl_form__text").removeClass(active);
            $(this).addClass(active);
            $(".bl_form__label").addClass(hidden);
            fild.removeClass(hidden);
        });
    }

    changeRegisterMethod($(".btn_email"), $(".label_email"));
    changeRegisterMethod($(".btn_tel"), $(".label_phone"));

    function animationDoor(el) {
        el.toggleClass("bl_animation1 bl_animation2");
    }


    var timer = setInterval(function () {

        animationDoor(resident);
        animationDoor(doorLight);
        animationDoor(doorInner);

    }, 1000);


    door.hover(function () {

            clearInterval(timer);

            if ($(this).hasClass("door_right")) {
                firstAnimationElements.removeClass("bl_animation1").addClass("bl_animation2");
                secondAnimationElements.removeClass("bl_animation2").addClass("bl_animation1");
                resident.removeClass("bl_animation1").addClass("bl_animation2");
            }else {
                firstAnimationElements.removeClass("bl_animation2").addClass("bl_animation1");
                secondAnimationElements.removeClass("bl_animation1").addClass("bl_animation2");
                resident.removeClass("bl_animation2").addClass("bl_animation1");
            }
        },

        function () {
            // setInterval(function () {
            //
            //     animationDoor(resident);
            //     animationDoor(doorLight);
            //     animationDoor(doorInner);
            //
            // }, 1000);
        });


    function showPopup(){
        $(".coverLayer").removeClass("hidden");
        $(".bl_popup").removeClass("hidden");
        // $(".js-input-email").focus();
    }


    door.one("click", function () {
        showPopup();
    });

    resident.one("click", function () {
        if($(this).children().has(".bl_animation1")){
            showPopup();
        }
    })


};


